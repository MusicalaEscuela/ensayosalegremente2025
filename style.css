/* =========================
   Cronograma de Ensayos – AlegreMente 2025
   Hoja de estilos (style.css)
   ========================= */

:root{
  --bg:#f7f7fb;
  --card:#fff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --brand:#2563eb;      /* azul */
  --brand-2:#7c3aed;    /* morado */
  --ok:#16a34a;         /* verde */
  --warn:#d97706;       /* ámbar */
  --radius:22px;
  --shadow:0 8px 26px rgba(16,24,40,.08);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(transparent 97%, rgba(99,102,241,.06) 98%) 0 0/26px 26px,
    linear-gradient(#fafbff,#f6f7fc);
  min-height:100vh;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.wrap{max-width:1200px;margin:0 auto;padding:0 18px}
.spacer{flex:1}
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;
  clip:rect(0,0,0,0);white-space:nowrap;border:0
}

/* ===== Accesibilidad: focus visible ===== */
:focus-visible{
  outline:3px solid rgba(124,58,237,.45);
  outline-offset:2px;
  border-radius:10px;
}

/* ===== Header compacto ===== */
header{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid var(--border)}
.head{display:flex;align-items:center;gap:14px;padding:10px 0}
.logo{width:46px;height:46px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.h1{margin:0;font-size:28px;letter-spacing:.2px}
.sub{color:var(--muted);font-size:13px}

.iconbtn{
  appearance:none;border:1px solid var(--border);background:#fff;border-radius:999px;
  height:38px;min-width:38px;padding:0 12px;display:inline-flex;align-items:center;gap:8px;
  cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.05)
}
.iconbtn:hover{background:#f9fafb}
.icon{width:18px;height:18px;display:inline-block;vertical-align:middle}

/* Botones de interfaz (Limpiar, etc.) */
.viewbtn{
  appearance:none;border:1px solid var(--border);background:#fff;border-radius:10px;
  padding:8px 12px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.05);
}
.viewbtn:hover{background:#f9fafb}

/* ===== Layout ===== */
main.wrap{display:grid;gap:18px;margin:20px auto 64px}
@media (min-width:980px){ main.wrap{grid-template-columns:1.1fr .9fr} }

.card{
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);
  padding:18px
}
.title{display:flex;align-items:center;gap:10px;margin:2px 0 8px}
.dot{width:10px;height:10px;border-radius:50%}
.dot-brand{background:var(--brand)}
.dot-alt{background:var(--brand-2)}

/* ===== Chips & toolbar ===== */
.toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:10px 0}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#fafafa;font-size:12px}
.chip.ok{border-color:#bbf7d0;background:#f0fdf4;color:#166534}
.chip.warn{border-color:#fde68a;background:#fffbeb;color:#92400e}
.chip.info{border-color:#bfdbfe;background:#eff6ff;color:#1d4ed8}

/* ===== KPIs + progress ring ===== */
.kpis{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
.k{
  background:#fafafa;border:1px solid var(--border);border-radius:18px;padding:12px;
  display:flex;align-items:center;gap:10px;min-height:72px;
}
.k .v{
  font-weight:800;
  /* más pequeño y adaptable para palabras largas como “Miércoles” */
  font-size:clamp(14px, 2.2vw, 20px);
  line-height:1.05;
  word-break:break-word;
}
.k .l{color:var(--muted);font-size:12px}
.ring{display:flex;align-items:center;gap:10px}
.ring svg{width:52px;height:52px}

/* ===== Timeline ===== */
.timeline{position:relative;margin:12px 0 6px}
.line{height:4px;background:linear-gradient(90deg,#e5e7eb,#c7d2fe);border-radius:999px}
.marks{position:relative;display:flex;justify-content:space-between;margin-top:-8px}
.mark{position:relative;top:-6px;width:12px;height:12px;border-radius:50%;background:#a5b4fc;border:2px solid #fff;box-shadow:0 0 0 2px #e5e7eb}
.mark.today{background:#22c55e}
.labelrow{display:flex;justify-content:space-between;font-size:12px;color:#374151;margin-top:6px}

/* ===== Lista de Fechas clave ===== */
.list{display:flex;flex-direction:column;gap:10px;margin-top:10px}
.item{
  display:grid;grid-template-columns:140px 1fr 36px;gap:12px;align-items:center;
  background:#fafafa;border:1px solid var(--border);border-radius:16px;padding:12px;position:relative;overflow:hidden
}
.ribbon{
  position:absolute;right:-38px;top:10px;transform:rotate(35deg);
  background:#f0fdf4;color:#166534;font-weight:700;font-size:11px;padding:3px 60px;border:1px solid #bbf7d0
}
.ribbon.pending{background:#fffbeb;color:#92400e;border-color:#fde68a}
.date{font-weight:800}
.tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.tag{font-size:11px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;background:#fff}
.tag.ok{border-color:#bbf7d0;background:#f0fdf4;color:#166534}
.tag.pending{border-color:#fde68a;background:#fffbeb;color:#92400e}

/* ===== Mini calendario ===== */
.mini-cal{margin-top:14px}
.cal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
.cal-cell{
  border:1px solid var(--border);background:#fff;border-radius:10px;padding:6px 0;
  text-align:center;font-size:12px;cursor:pointer
}
.cal-cell.dim{color:#9ca3af;background:#f9fafb}
.cal-cell.active{outline:2px solid #a5b4fc}
.cal-cell.has{background:#eef2ff;border-color:#c7d2fe;font-weight:700}
/* ↓ días de la semana más pequeños para que quepan */
.cal-dow {
  color:#6b7280;
  font-size:10px;      /* más pequeño */
  text-align:center;
  line-height:1.1;     /* menos espacio vertical */
  white-space:normal;  /* permite salto de línea */
  word-break:break-word; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  height:28px;         /* asegura que haya espacio */
}

/* ===== Filtros + resumen ===== */
.filters{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 10px}
select,input[type="date"]{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff}
.summary{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}

/* ===== Tabla ===== */
.tablewrap{max-height:480px;overflow:auto;border:1px solid var(--border);border-radius:16px;background:#fff}
table{width:100%;border-collapse:separate;border-spacing:0}
th,td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:left;font-size:14px;vertical-align:top}
th{background:#fafafa;position:sticky;top:0;z-index:1}
tbody tr:hover{background:#fcfcff}

.state{font-weight:800}
.state.programado{color:#1d4ed8}
.state.confirmado{color:#166534}
.state.pendiente{color:#92400e}

.badge{padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:11px;background:#fff}

/* Asistentes (chips) */
.attendees{display:flex;flex-wrap:wrap;gap:6px}
.attendee{
  display:inline-block;font-size:11px;line-height:1;
  padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:#fff
}
.attendee.more{background:#eef2ff;border-color:#c7d2fe}

/* Leyenda e impresión */
.legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.pill{font-size:11px;padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:#fff}
.pill.ok{border-color:#bbf7d0;background:#f0fdf4;color:#166534}
.pill.info{border-color:#bfdbfe;background:#eff6ff;color:#1d4ed8}
.pill.warn{border-color:#fde68a;background:#fffbeb;color:#92400e}
.foot{margin-top:20px;font-size:12px;color:var(--muted)}

/* ===== Hotfixes solicitados ===== */
/* Ocultar los puntos azules (marcas) de la línea de tiempo */
.timeline .marks{ display:none !important; }

/* Mostrar mensaje cuando no hay filas en la tabla (por ejemplo al elegir un día sin eventos) */
.tablewrap:has(tbody:empty)::after{
  content: "No hay eventos hoy.";
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: var(--muted);
  font-size: 14px;
}

/* Impresión */
@media print{
  header,.mini-cal .cal-head button,.iconbtn,.tools,.filters .viewbtn,.summary{display:none!important}
  main.wrap{grid-template-columns:1fr}
  .tablewrap{max-height:none;border:none}
  .card{box-shadow:none}
}

/* Poner en columna los KPIs 2 y 3 (v arriba, l abajo) */
.kpis .k:not(.ring){
  flex-direction: column;     /* en vez de lado a lado */
  align-items: flex-start;    /* o center si prefieres centrado */
  gap: 4px;
  min-height: 72px;
}

/* Texto grande de “Miércoles” y de la fecha: más pequeño y con buen comportamiento */
.kpis .k:nth-child(2) .v,
.kpis .k:nth-child(3) .v{
  font-size: clamp(14px, 1.6vw, 18px);
  line-height: 1.05;
  white-space: normal;        /* permite saltos, no letra por letra */
  word-break: keep-all;       /* evita romper palabras al azar */
  overflow-wrap: anywhere;    /* si toca, parte por espacios primero */
}

/* Etiquetas pequeñas debajo */
.kpis .k:nth-child(2) .l,
.kpis .k:nth-child(3) .l{
  font-size: 12px;
  color: var(--muted);
}

/* ===== Scrollbar (suave, opcional) ===== */
.tablewrap::-webkit-scrollbar{height:10px;width:10px}
.tablewrap::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:10px}
.tablewrap::-webkit-scrollbar-track{background:#f3f4f6;border-radius:10px}

/* ===== Reduce motion ===== */
@media (prefers-reduced-motion: reduce){
  *{scroll-behavior:auto}
}
